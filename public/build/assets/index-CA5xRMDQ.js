import{E as y,q as T,m as S,t as c,j as s,I as n,a as i}from"./app-CD6cBdKM.js";import{o as k,s as d,c as C,g as E,F,d as p}from"./form-provider-C9b8JaXX.js";import"./styles-gzNUAspH.js";import"./order-complete-illustration-KAH1HJrN.js";import{u as P}from"./useLang-BvyXRUe-.js";import{C as A}from"./Card-4eiaUBLO.js";import{S as I}from"./Stack-vomvaMcO.js";import{I as m}from"./InputAdornment-Bwj7yPg5.js";import{B as q}from"./Button--KfC8rp5.js";import"./TextField-Dh4fcTDh.js";import"./Popover-6bJkE66t.js";import"./createSvgIcon-BRtoGIw2.js";import"./FormControlLabel-DrSLr8OZ.js";import"./Chip-BNrhAUiE.js";import"./merge-y9PmGEhP.js";import"./MenuItem-DmaGw-zu.js";import"./Checkbox-BMTKf5nZ.js";import"./useThemeProps-DzpMU5fq.js";function Z({currentUser:l}){const{__:o}=P(),e=y(),{props:u}=T(),w=u.csrf_token,f=k({current_password:d().min(1,{message:o("validation.required",{attribute:o("validation.attributes.current_password")})}),password:d().min(6,{message:o("validation.min.string",{attribute:o("validation.attributes.password"),min:6})}),password_confirmation:d().min(1,{message:o("validation.required",{attribute:o("validation.attributes.password_confirmation")})})}).refine(r=>r.password===r.password_confirmation,{path:["password_confirmation"],message:o("validation.confirmed")}),a=C({resolver:E(f),mode:"onChange",defaultValues:{current_password:"",password:"",password_confirmation:""}}),{handleSubmit:x,setError:g,formState:{isSubmitting:_}}=a,b=x(r=>{const t=new FormData;t.append("_token",w),t.append("_method","PATCH"),t.append("current_password",r.current_password),t.append("password",r.password),t.append("password_confirmation",r.password_confirmation),S.post(route("users.update",l.id),t,{onSuccess:()=>{c.success(o("pages/users.update_success")),a.reset()},onError:j=>{Object.entries(j).forEach(([h,v])=>{g(h,{type:"server",message:v})}),c.error(o("pages/users.update_error"))}})});return s.jsx(F,{methods:a,onSubmit:b,children:s.jsx(A,{sx:{p:3},children:s.jsxs(I,{spacing:3,children:[s.jsx(p.Text,{name:"current_password",type:e.value?"text":"password",label:o("pages/users.form.current_password"),slotProps:{input:{endAdornment:s.jsx(m,{position:"end",children:s.jsx(n,{onClick:e.onToggle,edge:"end",children:s.jsx(i,{icon:e.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}}),s.jsx(p.Text,{name:"password",type:e.value?"text":"password",label:o("pages/users.form.password"),slotProps:{input:{endAdornment:s.jsx(m,{position:"end",children:s.jsx(n,{onClick:e.onToggle,edge:"end",children:s.jsx(i,{icon:e.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}}),s.jsx(p.Text,{name:"password_confirmation",type:e.value?"text":"password",label:o("validation.attributes.password_confirmation"),slotProps:{input:{endAdornment:s.jsx(m,{position:"end",children:s.jsx(n,{onClick:e.onToggle,edge:"end",children:s.jsx(i,{icon:e.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}}),s.jsx(q,{type:"submit",variant:"contained",loading:_,sx:{ml:"auto"},children:o("pages/users.form.submit_update")})]})})})}export{Z as EditPasswordUserForm};
